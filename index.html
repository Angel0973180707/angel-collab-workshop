<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <title>Angel Collab Workshop</title>

  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./assets/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./assets/icons/icon-192.png" />

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brandMark">🕊️</div>
      <div class="brandText">
        <div class="brandTitle">Angel Collab Workshop</div>
        <div class="brandSub">骨架版｜先做工具，再長成課程</div>
      </div>
    </div>

    <div class="topActions">
      <button class="btn ghost" id="btnInstall" hidden>安裝</button>
      <button class="btn" id="btnAdd">新增工具</button>
    </div>
  </header>

  <!-- LIST VIEW -->
  <main class="wrap" id="viewList">
    <section class="panel">
      <div class="panelHead">
        <h1>工具卡片</h1>
        <p class="muted">點卡片進入工具頁。輸入會自動保存（本機）。</p>
      </div>

      <div class="cards" id="cardList"></div>

      <div class="empty" id="emptyState" hidden>
        <div class="emptyTitle">尚未新增工具</div>
        <div class="emptySub">先放一張卡就好。工具會慢慢長。</div>
        <button class="btn" id="btnAddFromEmpty">新增第一張</button>
      </div>
    </section>
  </main>

  <!-- DETAIL VIEW -->
  <main class="wrap" id="viewDetail" hidden>
    <section class="panel">
      <div class="detailTop">
        <button class="btn ghost" id="btnBack">← 返回</button>
        <div class="detailMeta">
          <div class="detailTitle" id="detailTitle"></div>
          <div class="detailPurpose" id="detailPurpose"></div>
        </div>
        <button class="btn danger" id="btnDelete">刪除</button>
      </div>

      <div class="detailBody">
        <!-- Special (Inspiration Keeper) block -->
        <div class="mantraBox" id="mantraBox" hidden>
          <div class="mantraLine1">靈感，讓我清楚看見你</div>
          <div class="mantraLine2">清楚或模糊，都是真實。</div>
        </div>

        <div class="field">
          <div class="fieldLabel">此刻的片段（可留白）</div>
          <div class="fieldHint">一句話 / 一個畫面 / 一個感覺。你不用整理，也不用完成。</div>
          <textarea id="detailNote" placeholder="如果此刻有一個片段，可以先放在這裡…"></textarea>
          <div class="saveHint" id="saveHint">會自動保存</div>
        </div>

        <div class="detailFooter">
          <div class="tiny muted" id="detailUpdated"></div>
          <div class="detailBtns">
            <button class="btn ghost" id="btnEdit">編輯卡片</button>
            <button class="btn ghost" id="btnCopyPrompt">複製 AI 咒語</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ADD / EDIT MODAL -->
  <dialog class="modal" id="toolModal">
    <form method="dialog" class="modalBox" id="toolForm">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">新增工具</div>
        <button class="btn ghost" value="cancel" type="submit">關閉</button>
      </div>

      <div class="field">
        <div class="fieldLabel">Tool Name</div>
        <input id="inpName" class="input" placeholder="例如：Inspiration Keeper｜靈感守門人" required />
      </div>

      <div class="field">
        <div class="fieldLabel">One-line Purpose</div>
        <input id="inpPurpose" class="input" placeholder="例如：為靈感留一個位置" />
      </div>

      <div class="field">
        <div class="fieldLabel">Optional Link</div>
        <input id="inpLink" class="input" placeholder="例如：https://你的工具頁（可空）" />
      </div>

      <div class="modalActions">
        <button class="btn ghost" value="cancel" type="submit">取消</button>
        <button class="btn" id="btnSaveTool" value="ok" type="submit">儲存</button>
      </div>

      <input type="hidden" id="inpId" />
    </form>
  </dialog>

  <div class="toast" id="toast">已複製</div>

  <script src="./app.js"></script>
</body>
</html>